(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,a,t){e.exports={App:"App_App__3fiks"}},15:function(e,a,t){e.exports={tabs:"Sessions_tabs__12Mby",sessions:"Sessions_sessions__3voH3",row:"Sessions_row__3Q0o3",nowrap:"Sessions_nowrap__HsAg-",headerRow:"Sessions_headerRow__2N5Np",rows:"Sessions_rows__v2Eng",textField:"Sessions_textField__Ry_2D",menuItem:"Sessions_menuItem__aE578",select:"Sessions_select__2BQj_",selectWrapper:"Sessions_selectWrapper__2-m7L",inputLabel:"Sessions_inputLabel__49xJk",rank:"Sessions_rank__1AhF3",date:"Sessions_date__2uRjF"}},205:function(e,a,t){e.exports=t(354)},210:function(e,a,t){},25:function(e,a,t){e.exports={container:"Login_container__1Z3Z_",logo:"Login_logo__3LaPA",loginBox:"Login_loginBox__2VFmZ",textWrap:"Login_textWrap__1HsmH",buttonWrap:"Login_buttonWrap___kcHS"}},28:function(e,a,t){e.exports={appBar:"Main_appBar__29VRX",container:"Main_container__264vY",grow:"Main_grow__1nOLj",menuButton:"Main_menuButton__3LWfm",person:"Main_person__rAaN6",main:"Main_main__2CiY1"}},354:function(e,a,t){"use strict";t.r(a);var n,s=t(0),r=t.n(s),c=t(20),l=t.n(c),o=(t(210),t(17)),i=t(21),m=t(124),u=t.n(m),f=(t(211),t(22)),d=t.n(f),p=t(27),_=t(46),h=t.n(_),g=t(24),E=t.n(g),b=t(33),N=t.n(b),v=t(40),k=t.n(v),S=t(25),j=t.n(S),O={},w=function(){var e=Object(p.a)(d.a.mark(function e(a,t,n){var s,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!O[a]){e.next=2;break}return e.abrupt("return",O[a]);case 2:!1,e.next=7;break;case 7:return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]="application/json",t&&(n.headers.Authorization="Bearer "+t),e.next=13,fetch("https://eyenetservice20190228013441.azurewebsites.net/v1/".concat(a),n);case 13:if(!(s=e.sent).ok){e.next=21;break}return e.next=17,s.json();case 17:return r=e.sent,O[a]=r,e.abrupt("return",r);case 21:case"end":return e.stop()}},e)}));return function(a,t,n){return e.apply(this,arguments)}}(),x=function(e){var a=e.onLogin,t=Object(s.useState)(""),n=Object(o.a)(t,2),c=n[0],l=n[1],i=Object(s.useState)(""),m=Object(o.a)(i,2),u=m[0],f=m[1],_=Object(s.useCallback)(Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("authenticate",void 0,{method:"POST",body:JSON.stringify({Username:c,Password:u})});case 2:t=e.sent,a(t);case 5:case"end":return e.stop()}},e)})),[a,c,u]),g=Object(s.useCallback)(function(e){"Enter"===e.key&&_()},[_]);return r.a.createElement(h.a,{className:j.a.container,container:!0,spacing:16,justify:"center",alignItems:"center",direction:"row"},r.a.createElement(h.a,{item:!0},r.a.createElement("h1",{className:j.a.logo},"EyeTracking"),r.a.createElement(E.a,{className:j.a.loginBox},r.a.createElement("div",{className:j.a.textWrap},r.a.createElement(N.a,{className:j.a.textField,label:"Username",onChange:function(e){return l(e.target.value)},onKeyPress:g})),r.a.createElement("div",{className:j.a.textWrap},r.a.createElement(N.a,{className:j.a.textField,label:"Password",onChange:function(e){return f(e.target.value)},onKeyPress:g})),r.a.createElement("div",{className:j.a.buttonWrap},r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:_},"Login")))))},y=t(126),C=t(32),D=t.n(C),I=t(127),L=t.n(I),T=t(128),F=t.n(T),R=t(60),A=t.n(R),P=t(57),B=t.n(P),M=t(15),W=t.n(M),U=t(58),V=t.n(U),z=t(45),H=t.n(z),J=t(44),Z=t.n(J),K=t(47),Q=t.n(K),Y=t(18);!function(e){e.Name="Name",e.Rank="Rank",e.Platform="Platform",e.Date="Date",e.Test="Test"}(n||(n={}));var X=function(e,a){return a===n.Name&&e.lastName||a===n.Rank&&e.rank||a===n.Platform&&e.platformName||a===n.Test&&e.testName||a===n.Date&&e.date||""},G=function(e,a){var t={};return e.forEach(function(e){var n=X(e,a);t[n]||(t[n]=[]),t[n].push(e)}),Object.keys(t).sort().map(function(e){return t[e]})},q=function(e,a){return r.a.createElement(B.a,{key:e,label:e,value:e,className:W.a.tab})},$=function(e){var a=e.id,t=e.name;return r.a.createElement(V.a,{key:a,value:a,className:W.a.menuItem},t)},ee=function(e,a,t,n){var s=[{id:-1,name:"All"}].concat(Object.keys(n).map(function(e){return{id:+e,name:n[+e]}}).sort(function(e,a){return e.name.localeCompare(a.name)}));return r.a.createElement("div",{className:W.a.selectWrapper},r.a.createElement(Z.a,{className:W.a.inputLabel,htmlFor:e},e),r.a.createElement(H.a,{className:W.a.select,value:a,onChange:function(e){t(+e.target.value)},inputProps:{id:e,name:e}},s.map($)))},ae=function e(a,t,s,c,l,o,i,m,u){return a.map(function(a){var f,d=a[0],p=l+X(d,c),_=t[p];if(_)if(c===n.Name)f=a.map(function(e){return r.a.createElement("div",{key:e.resultId,className:W.a.row,style:{paddingLeft:o+40}},r.a.createElement(Q.a,{color:"primary",checked:!!s[e.resultId],onChange:function(a){return m(e.resultId,a.target.checked)}}),r.a.createElement(Y.a,{className:W.a.nowrap,onClick:function(){return u([e])}},r.a.createElement("div",{className:W.a.platform},e.testName),r.a.createElement("div",{className:W.a.date},e.platformName),r.a.createElement("div",{className:W.a.date},e.dateString)))});else{var h=G(a,n.Name);f=e(h,t,s,n.Name,p,40,i,m,u)}return r.a.createElement(r.a.Fragment,{key:d.resultId},function(e,a,t,s,c){var l;return a===n.Name?l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.name,onClick:s},"".concat(e.lastName,", ").concat(e.firstName)),r.a.createElement("div",{className:W.a.rank},e.rank)):a===n.Rank?l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.name,onClick:s},e.rank)):a===n.Platform?l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.name,onClick:s},e.platformName)):a===n.Test?l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.name,onClick:s},e.testName)):a===n.Date&&(l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.name,onClick:s},e.dateString))),r.a.createElement("div",{key:"h"+e.resultId,className:W.a.row,style:{paddingLeft:c}},r.a.createElement(D.a,{className:W.a.menuButton,color:"inherit","aria-label":"Menu",onClick:s},t?r.a.createElement(L.a,null):r.a.createElement(F.a,null)),l)}(d,c,_,function(){return i(p)},o),f)})},te=function(e){var a=e.data,t=e.sessionInfo,c=e.onSelectSessions,l=Object(s.useState)(""),i=Object(o.a)(l,2),m=i[0],u=i[1],f=Object(s.useState)(n.Name),d=Object(o.a)(f,2),p=d[0],_=d[1],h=Object(s.useState)(-1),g=Object(o.a)(h,2),b=g[0],v=g[1],k=Object(s.useState)(-1),S=Object(o.a)(k,2),j=S[0],O=S[1],w=Object(s.useState)(-1),x=Object(o.a)(w,2),C=x[0],D=x[1],I=Object(s.useState)(-1),L=Object(o.a)(I,2),T=L[0],F=L[1],R=Object(s.useState)({}),P=Object(o.a)(R,2),B=P[0],M=P[1],U=Object(s.useState)({}),V=Object(o.a)(U,2),z=V[0],H=V[1],J=a.filter(function(e){return(C<0||e.platformId===C)&&(j<0||e.testId===j)&&(T<0||e.date===T)&&(!m||function(e,a,t){switch(t){case n.Name:return e.lastName.toLowerCase().includes(a)||e.firstName.toLowerCase().includes(a);case n.Rank:return e.rank.includes(a);case n.Platform:return e.platformName.includes(a);case n.Test:return e.testName.includes(a);default:return!0}}(e,m,p))}),Z={};J.forEach(function(e){Z[e.resultId]=e});var K=G(J,p),X=Object(s.useCallback)(function(e,a){M({}),_(a)},[]),$=Object(s.useCallback)(function(e){u(e.target.value.toLowerCase())},[]),te=Object(s.useCallback)(function(e){var a=Object.assign({},B);a[e]=!a[e],M(a)},[B]),ne=Object(s.useCallback)(function(e,a){var t=Object.assign({},z,Object(y.a)({},e,a));H(t)},[z]),se=Object(s.useCallback)(function(){var e={};0===Object.keys(z).length&&K.forEach(function(a){return a.forEach(function(a){e[a.resultId]=!0})}),H(e)},[z,K]),re=Object(s.useCallback)(function(){var e=Object.keys(z).map(function(e){return Z[+e]});if(e.length>5&&!window.confirm("Are you sure you want to compare ".concat(e.length," sessions?")))return;c(e)},[z,c,Z]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:W.a.tabs,value:p,onChange:X},q(n.Name),q(n.Rank),q(n.Platform),q(n.Test),q(n.Date)),r.a.createElement(E.a,{elevation:1},!a&&r.a.createElement("span",null,"Loading..."),a&&r.a.createElement("div",null,r.a.createElement("div",{className:"".concat(W.a.row," ").concat(W.a.headerRow)},r.a.createElement(Q.a,{key:"checkbox",color:"primary",checked:Object.keys(z).length>0,onChange:se}),Object.keys(z).length?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:re},"Compare")):r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{label:p,variant:"outlined",margin:"dense",onChange:$,InputProps:{classes:{input:"textField"}}}),ee("Rank",b,v,t.ranks),ee("Platform",C,D,t.platforms),ee("Test",j,O,t.tests),ee("Date",T,F,t.dates))),r.a.createElement("div",{className:W.a.rows},ae(K,B,z,p,"",0,te,ne,e.onSelectSessions)))))},ne=function(e){var a=Object(s.useState)(void 0),t=Object(o.a)(a,2),n=t[0],c=t[1];return Object(s.useEffect)(function(){var a=function(e){var a={platforms:{},ranks:{},dates:{},tests:{},subjects:{}};e.forEach(function(e){var t=new Date(e.dateCollected);e.date=+t,e.dateString=t.toDateString(),e.rankId=0,e.rank="Unknown Rank",e.name="".concat(e.lastName,", ").concat(e.firstName),a.platforms[e.platformId]=e.platformName,a.dates[e.date]=e.dateString,a.subjects[e.subjectId]=e.name,a.ranks[e.rankId]=e.rank,a.tests[e.testId]=e.testName}),c({data:e,sessionInfo:a})};w("result/summary",e.user.token).then(function(){var e=Object(p.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(t);case 2:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}())},[e.user.token]),r.a.createElement("div",{className:W.a.sessions},n&&r.a.createElement(te,Object.assign({},e,{data:n.data,sessionInfo:n.sessionInfo})),!n&&r.a.createElement("span",null,"Loading..."))},se=t(9),re=t.n(se),ce=t(90),le=t.n(ce),oe=t(131),ie=t.n(oe),me=t(129),ue=t.n(me),fe=t(130),de=t.n(fe),pe=["Raw","Sum"],_e=function(e,a){return{chart:{zoomType:"x"},title:{text:""},xAxis:{title:{text:"Time"}},yAxis:{title:{text:"Workload"}},series:e.map(function(e){return{type:"line",name:e.name,data:e.data}})}},he=function(e){var a=e.sessions,t=e.user.token,n=Object(s.useState)(void 0),c=Object(o.a)(n,2),l=c[0],i=c[1],m=Object(s.useState)("Sum"),u=Object(o.a)(m,2),f=u[0],_=u[1],h=Object(s.useState)(_e([])),g=Object(o.a)(h,2),E=g[0],b=g[1];return Object(s.useEffect)(function(){if(l){var e,a=[];e="Sum"===f?function(e){var a=[];return e.reduce(function(e,t,n){return a[n]=+(e+t).toFixed(2)},0),a}:function(e){return e},l.forEach(function(t,n){var s=t.session,r=t.resultData.map(function(e){return(Math.max(0,e.leftValue)+Math.max(e.rightValue,0))/2}),c=e(r);a.push({name:s.testName,data:c})}),b(_e(a))}},[l,f]),Object(s.useEffect)(function(){Promise.all(a.map(function(){var e=Object(p.a)(d.a.mark(function e(a){var n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return{session:a,resultData:e}},e.next=3,w("result/workloaddata/".concat(a.resultId),t);case 3:return s=e.sent,e.abrupt("return",n(s));case 5:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}())).then(function(e){i(e)})},[t,a]),l?r.a.createElement("div",{className:re.a.sessionDetails},r.a.createElement("div",{className:"".concat(re.a.card," ").concat(re.a.personDetails)},a.map(function(e){return r.a.createElement("span",{key:e.resultId},r.a.createElement("div",{className:re.a.name},e.name),r.a.createElement("div",{className:re.a.light},e.rank),r.a.createElement("div",{className:re.a.light},e.platformName),r.a.createElement("div",{className:re.a.light},e.dateString))})),r.a.createElement(Y.b,{className:"".concat(re.a.card," ").concat(re.a.chartCard)},r.a.createElement(Y.c,{className:re.a.cardContent},r.a.createElement(Y.f,{className:re.a.title,color:"textSecondary"},"Results"),r.a.createElement(Y.e,{className:re.a.selectAlgorithm,value:f,onChange:function(e){return _(e.target.value)}},pe.map(function(e){return r.a.createElement(Y.d,{key:e,value:e,className:re.a.menuItem},e)})),r.a.createElement(de.a,{className:re.a.chart,highcharts:ue.a,options:E}))),r.a.createElement(Y.b,{className:"".concat(re.a.card," ").concat(re.a.highlights)},r.a.createElement(Y.c,{className:re.a.cardContent},r.a.createElement(Y.f,{className:re.a.title,color:"textSecondary"},"Highlights"),r.a.createElement(Y.f,{className:re.a.highlightsContent},r.a.createElement("span",{className:re.a.highlightsText},"Workload"),r.a.createElement(le.a,{fontSize:"small",className:"".concat(re.a.icon," ").concat(re.a.arrowUp)})," 3%"),r.a.createElement(Y.f,{className:re.a.highlightsContent},r.a.createElement("span",{className:re.a.highlightsText},"Time"),r.a.createElement(ie.a,{fontSize:"small",className:"".concat(re.a.icon," ").concat(re.a.arrowDown)})," 2%"),r.a.createElement(Y.f,{className:re.a.highlightsContent},r.a.createElement("span",{className:re.a.highlightsText},"Scan Efficiency"),r.a.createElement(le.a,{fontSize:"small",className:"".concat(re.a.icon," ").concat(re.a.arrowUp)})," 5%")))):r.a.createElement("div",{className:re.a.loading},r.a.createElement("div",null,"Loading..."))},ge=t(61),Ee=t.n(ge),be=t(62),Ne=t.n(be),ve=t(59),ke=t.n(ve),Se=t(132),je=t.n(Se),Oe=t(133),we=t.n(Oe),xe=t(28),ye=t.n(xe),Ce=function(e){var a=Object(s.useState)(void 0),t=Object(o.a)(a,2),n=t[0],c=t[1],l=Object(s.useCallback)(function(){return c(void 0)},[]),i=Object(s.useCallback)(function(e){c(e)},[c]);return r.a.createElement("div",{className:ye.a.container},r.a.createElement(Ee.a,{position:"static",className:ye.a.appBar},r.a.createElement(Ne.a,null,n&&r.a.createElement(D.a,{className:ye.a.menuButton,color:"inherit","aria-label":"Menu"},r.a.createElement(je.a,{onClick:l})),r.a.createElement(ke.a,{variant:"h6",color:"inherit"},n?"Session Details":"Sessions"),r.a.createElement("div",{className:ye.a.grow}),r.a.createElement(k.a,{className:ye.a.menuButton,color:"inherit","aria-label":"Menu"},r.a.createElement(we.a,{className:ye.a.person}),"User"))),r.a.createElement("div",{className:ye.a.main},n&&r.a.createElement(he,{user:e.user,sessions:n}),!n&&r.a.createElement(ne,{user:e.user,onSelectSessions:i})))},De=Object(i.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{light:"#69b6ff",main:"#1c87e5",dark:"#005bb2",contrastText:"#fff"},secondary:{light:"#ff94c2",main:"#f06292",dark:"#ba2d65",contrastText:"#fff"}}}),Ie=function(){var e=Object(s.useState)(void 0),a=Object(o.a)(e,2),t=a[0],n=a[1],c=Object(s.useCallback)(function(e){n(e)},[]);return r.a.createElement(i.MuiThemeProvider,{theme:De},r.a.createElement("div",{className:u.a.App},!t&&r.a.createElement(x,{onLogin:c}),t&&r.a.createElement(Ce,{user:t})))};l.a.render(r.a.createElement(Ie,null),document.getElementById("root"))},9:function(e,a,t){e.exports={sessionDetails:"SessionDetails_sessionDetails__365kB",card:"SessionDetails_card__3E97H",personDetails:"SessionDetails_personDetails__VZ9AD",name:"SessionDetails_name__UEzSR",light:"SessionDetails_light__3KWXC",cardContent:"SessionDetails_cardContent__1bB-u",highlights:"SessionDetails_highlights__TJ4nQ",title:"SessionDetails_title__1F3Sb",icon:"SessionDetails_icon__pjM0N",arrowUp:"SessionDetails_arrowUp__1_Jpe",arrowDown:"SessionDetails_arrowDown__JRYVg",highlightsText:"SessionDetails_highlightsText__1wOo_",highlightsContent:"SessionDetails_highlightsContent__1SMh7",loading:"SessionDetails_loading__17gOV",selectAlgorithm:"SessionDetails_selectAlgorithm__-28GZ",menuItem:"SessionDetails_menuItem__1NNS-"}}},[[205,1,2]]]);
//# sourceMappingURL=main.c1bbc020.chunk.js.map