(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,a,t){e.exports={tabs:"Sessions_tabs__CKk8P",sessions:"Sessions_sessions__3O3K1",row:"Sessions_row__1tcb8",nowrap:"Sessions_nowrap__DwYsH",headerRow:"Sessions_headerRow__2rKHq",rowGroup:"Sessions_rowGroup__3m2nq",rowItem:"Sessions_rowItem__1wnv-",textField:"Sessions_textField__3jwdb",menuItem:"Sessions_menuItem__1SfdC",select:"Sessions_select__1cARZ",selectWrapper:"Sessions_selectWrapper__1n7Pq",inputLabel:"Sessions_inputLabel__2TnWd",rank:"Sessions_rank__2G_q3",date:"Sessions_date__12K1F"}},235:function(e,a,t){e.exports={App:"App_App__2_ehQ"}},323:function(e,a,t){e.exports=t(572)},328:function(e,a,t){},48:function(e,a,t){e.exports={container:"Login_container__1eTid",logo:"Login_logo__2BOQm",loginBox:"Login_loginBox__1Y1wR",textWrap:"Login_textWrap__14ETT",buttonWrap:"Login_buttonWrap__2GrgY"}},55:function(e,a,t){e.exports={appBar:"Main_appBar__2g5yQ",container:"Main_container__16ARa",grow:"Main_grow__qHqU7",menuButton:"Main_menuButton__XqGKB",person:"Main_person__2VAp8",main:"Main_main__2d6SH"}},572:function(e,a,t){"use strict";t.r(a);var n,r=t(1),s=t.n(r),c=t(34),o=t.n(c),l=(t(328),t(26)),i=t(35),u=t(235),m=t.n(u),f=(t(329),t(46)),d=t.n(f),p=t(73),b=t(90),E=t.n(b),v=t(51),_=t.n(v),k=t(62),h=t.n(k),g=t(72),j=t.n(g),N=t(48),O=t.n(N),w=function(e){var a=e.onLogin,t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(""),u=Object(l.a)(i,2),m=u[0],f=u[1],b=Object(r.useCallback)(Object(p.a)(d.a.mark(function e(){var t,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://eyenetservice20190228013441.azurewebsites.net/v1/authenticate",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({Username:c,Password:m})});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:n=e.sent,a(n);case 9:case"end":return e.stop()}},e)})),[a,c,m]);return s.a.createElement(E.a,{className:O.a.container,container:!0,spacing:16,justify:"center",alignItems:"center",direction:"row"},s.a.createElement(E.a,{item:!0},s.a.createElement("h1",{className:O.a.logo},"EyeTracking"),s.a.createElement(_.a,{className:O.a.loginBox},s.a.createElement("div",{className:O.a.textWrap},s.a.createElement(h.a,{className:O.a.textField,label:"Username",onChange:function(e){return o(e.target.value)}})),s.a.createElement("div",{className:O.a.textWrap},s.a.createElement(h.a,{className:O.a.textField,label:"Password",onChange:function(e){return f(e.target.value)}})),s.a.createElement("div",{className:O.a.buttonWrap},s.a.createElement(j.a,{variant:"contained",color:"primary",onClick:b},"Login")))))},S=t(237),C=t(61),y=t.n(C),x=t(238),I=t.n(x),D=t(239),B=t.n(D),F=t(116),P=t.n(F),A=t(114),L=t.n(A),T=t(21),R=t.n(T),W=t(115),M=t.n(W),q=t(89),z=t.n(q),G=t(88),H=t.n(G),K=t(91),U=t.n(K),J=t(240);!function(e){e.Name="Name",e.Rank="Rank",e.Platform="Platform",e.Date="Date"}(n||(n={}));var Q=function(e){return(e===n.Name?"subjects":e===n.Rank&&"ranks")||e===n.Platform&&"platforms"||e===n.Date&&"dates"||""},Y=function(e,a){return s.a.createElement(L.a,{key:e,label:e,value:e,className:R.a.tab})},V=function(e){var a=e.id,t=e.name;return s.a.createElement(M.a,{key:a,value:a,className:R.a.menuItem},t)},X=function(e,a,t,n){var r=Object.keys(n).map(function(e){return{id:+e,name:n[+e]}}).sort(function(e,a){return e.name.localeCompare(a.name)});return s.a.createElement("div",{className:R.a.selectWrapper},s.a.createElement(H.a,{className:R.a.inputLabel,htmlFor:e},e),s.a.createElement(z.a,{className:R.a.select,value:a,onChange:function(e){t(+e.target.value)},inputProps:{name:e,id:e}},r.map(V)))},Z=function(e){var a=e.data,t=e.sessionInfo,c=e.onSelectSessions,o=Object(r.useState)(""),i=Object(l.a)(o,2),u=i[0],m=i[1],f=Object(r.useState)(n.Name),d=Object(l.a)(f,2),p=d[0],b=d[1],E=Object(r.useState)(-1),v=Object(l.a)(E,2),k=v[0],g=v[1],j=Object(r.useState)(-1),N=Object(l.a)(j,2),O=N[0],w=N[1],C=Object(r.useState)(-1),x=Object(l.a)(C,2),D=x[0],F=x[1],A=Object(r.useState)({}),L=Object(l.a)(A,2),T=L[0],W=L[1],M=Object(r.useState)({}),q=Object(l.a)(M,2),z=q[0],G=q[1],H=function(e,a,t,n,r,s){var c={},o={},l=Q(a);e.forEach(function(e){if((r<0||e.platformId===r)&&(s<0||e.date===s)&&(!t||e[l].includes(t))){var a=e[l];c[a]||(c[a]=[]),c[a].push(e),o[e.resultId]=e}});var i=Object.keys(c).sort().map(function(e){return c[e]});return{results:o,groups:i}}(a,p,u,0,O,D),K=H.groups,V=H.results,Z=Object(r.useCallback)(function(e,a){b(a)},[]),$=Object(r.useCallback)(function(e){m(e.target.value)},[]),ee=Object(r.useCallback)(function(e){var a=Object.assign({},T);a[e]=!a[e],W(a)},[T]),ae=Object(r.useCallback)(function(e,a){var t=Object.assign({},z,Object(S.a)({},e,a));G(t)},[z]),te=Object(r.useCallback)(function(){var e={};0===Object.keys(z).length&&K.forEach(function(a){return a.forEach(function(a){e[a.resultId]=!0})}),G(e)},[z,K]),ne=Object(r.useCallback)(function(){var e=Object.keys(z).map(function(e){return V[+e]});if(e.length>5&&!window.confirm("Are you sure you want to compare ".concat(e.length," sessions?")))return;c(e)},[z,c,V]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(P.a,{className:R.a.tabs,value:p,onChange:Z},Y(n.Name),Y(n.Rank),Y(n.Platform),Y(n.Date)),s.a.createElement(_.a,null,!a&&s.a.createElement("span",null,"Loading..."),a&&s.a.createElement("div",null,s.a.createElement("div",{className:"".concat(R.a.row," ").concat(R.a.headerRow)},s.a.createElement(U.a,{key:"checkbox",color:"primary",checked:Object.keys(z).length>0,onChange:te}),Object.keys(z).length?s.a.createElement(s.a.Fragment,null,s.a.createElement(J.a,{variant:"contained",color:"primary",onClick:ne},"Compare")):s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{label:p,variant:"outlined",margin:"dense",onChange:$,InputProps:{classes:{input:"textField"}}}),X("Rank",k,g,t.ranks),X("Platform",O,w,t.platforms),X("Date",D,F,t.dates))),s.a.createElement("div",null,K.map(function(a){var t=a[0],r=t[Q(p)],c=T[r];return s.a.createElement(s.a.Fragment,{key:t.resultId},function(e,a,t,r){var c;return a===n.Name?c=s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:R.a.name,onClick:r},"".concat(e.lastName,", ").concat(e.firstName)),s.a.createElement("div",{className:R.a.rank},e.rank)):a===n.Rank?c=s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:R.a.name,onClick:r},e.rank)):a===n.Platform?c=s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:R.a.name,onClick:r},e.platformName)):a===n.Date&&(c=s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:R.a.name,onClick:r},e.dateString))),s.a.createElement("div",{key:"h"+e.resultId,className:"".concat(R.a.row," ").concat(R.a.rowGroup)},s.a.createElement(y.a,{className:R.a.menuButton,color:"inherit","aria-label":"Menu",onClick:r},t?s.a.createElement(I.a,null):s.a.createElement(B.a,null)),c)}(t,p,c,function(){return ee(r)}),c&&a.map(function(a){return s.a.createElement("div",{key:a.resultId,className:"".concat(R.a.row," ").concat(R.a.rowItem)},s.a.createElement(U.a,{color:"primary",checked:!!z[a.resultId],onChange:function(e){return ae(a.resultId,e.target.checked)}}),s.a.createElement("div",{className:R.a.nowrap,onClick:function(){return e.onSelectSessions([a])}},s.a.createElement("div",{className:R.a.platform},a.resultId+"  "),s.a.createElement("div",{className:R.a.platform},a.testName),s.a.createElement("div",{className:R.a.date},a.platformName),s.a.createElement("div",{className:R.a.date},a.dateString)))}))})))))},$=function(e){var a=Object(r.useState)(void 0),t=Object(l.a)(a,2),n=t[0],c=t[1];return Object(r.useEffect)(function(){var a=function(e){var a={platforms:{},ranks:{},dates:{},subjects:{}};e.forEach(function(e){var t=new Date(e.dateCollected);e.date=+t,e.dateString=t.toDateString(),e.rankId=0,e.rank="Unknown Rank",e.name="".concat(e.lastName,", ").concat(e.firstName),a.platforms[e.platformId]=e.platformName,a.dates[e.date]=e.dateString,a.subjects[e.subjectId]=e.name,a.ranks[e.rankId]=e.rank}),console.log(e),c({data:e,sessionInfo:a})};fetch("https://eyenetservice20190228013441.azurewebsites.net/v1/result/summary",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.user.token}}).then(function(){var e=Object(p.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,a(n);case 5:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}())},[e.user.token]),s.a.createElement("div",{className:R.a.sessions},n&&s.a.createElement(Z,Object.assign({},e,{data:n.data,sessionInfo:n.sessionInfo})),!n&&s.a.createElement("span",null,"Loading..."))},ee=t(65),ae=t.n(ee),te=t(578),ne=t(580),re=t(581),se=["332288","88CCEE","44AA99","117733","999933","DDCC77","CC6677","882255","AA4499"],ce=function(e){var a,t,n=e.sessions,c=e.user.token,o=[],i=[],u=Object(r.useState)(void 0),m=Object(l.a)(u,2),f=m[0],b=m[1];if(Object(r.useEffect)(function(){Promise.all(n.map(function(){var e=Object(p.a)(d.a.mark(function e(a){var t,n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){return{session:a,resultData:e}},e.next=6;break;case 6:return e.next=8,fetch("https://eyenetservice20190228013441.azurewebsites.net/v1/result/workloaddata/".concat(a.resultId),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+c}});case 8:return n=e.sent,e.next=11,n.json();case 11:return r=e.sent,e.abrupt("return",t(r));case 14:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}())).then(function(e){b(e)})},[c,n]),f)if(f.forEach(function(e,a){var t=e.session;e.resultData.slice(0,100).forEach(function(e){var a=e.time,n=e.leftValue;o[a]||(o[a]={}),o[a][t.resultId]=n}),i.push({name:t.testName,field:t.resultId,color:"#"+se[a]})}),o.forEach(function(e){i.forEach(function(a){e[a.field]||(e[a.field]=0)})}),1===n.length){var E=n[0];a=s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:ae.a.name},E.name),s.a.createElement("div",{className:ae.a.rank},E.rank)),t=s.a.createElement("div",{className:ae.a.chartTitle},"".concat(E.platformName," ").concat(E.dateString))}else a="Compare";return s.a.createElement("div",{className:ae.a.sessionDetails},s.a.createElement("div",{className:ae.a.personDetails},a),t,s.a.createElement("div",{className:ae.a.chart},s.a.createElement(ne.a,{animate:{duration:500,onLoad:{duration:100}}},i.map(function(e){return function(e,a,t){return s.a.createElement(te.a,{key:a,data:e,x:"time",y:a,style:{data:{stroke:t,strokeWidth:1}}})}(o,e.field,e.color)}),s.a.createElement(re.a,{orientation:"horizontal",gutter:20,data:i.map(function(e){return{name:e.name,symbol:{fill:e.color}}})}))))},oe=t(117),le=t.n(oe),ie=t(118),ue=t.n(ie),me=t(119),fe=t.n(me),de=t(248),pe=t.n(de),be=t(249),Ee=t.n(be),ve=t(55),_e=t.n(ve),ke=function(e){var a=Object(r.useState)(void 0),t=Object(l.a)(a,2),n=t[0],c=t[1],o=Object(r.useCallback)(function(){return c(void 0)},[]);return s.a.createElement("div",{className:_e.a.container},s.a.createElement(le.a,{position:"static",className:_e.a.appBar},s.a.createElement(ue.a,null,n&&s.a.createElement(y.a,{className:_e.a.menuButton,color:"inherit","aria-label":"Menu"},s.a.createElement(pe.a,{onClick:o})),s.a.createElement(fe.a,{variant:"h6",color:"inherit"},n?"Session Details":"Sessions"),s.a.createElement("div",{className:_e.a.grow}),s.a.createElement(j.a,{className:_e.a.menuButton,color:"inherit","aria-label":"Menu"},s.a.createElement(Ee.a,{className:_e.a.person}),"User"))),s.a.createElement("div",{className:_e.a.main},n&&s.a.createElement(ce,{user:e.user,sessions:n}),!n&&s.a.createElement($,{user:e.user,onSelectSessions:function(e){return c(e)}})))},he=Object(i.createMuiTheme)({palette:{primary:{light:"#69b6ff",main:"#1c87e5",dark:"#005bb2",contrastText:"#fff"},secondary:{light:"#ff94c2",main:"#f06292",dark:"#ba2d65",contrastText:"#fff"}}}),ge=function(){var e=Object(r.useState)(void 0),a=Object(l.a)(e,2),t=a[0],n=a[1],c=Object(r.useCallback)(function(e){n(e)},[]);return s.a.createElement(i.MuiThemeProvider,{theme:he},s.a.createElement("div",{className:m.a.App},!t&&s.a.createElement(w,{onLogin:c}),t&&s.a.createElement(ke,{user:t})))};o.a.render(s.a.createElement(ge,null),document.getElementById("root"))},65:function(e,a,t){e.exports={personDetails:"SessionDetails_personDetails__3Bjtn",name:"SessionDetails_name__1JHzx",chart:"SessionDetails_chart__14v35"}}},[[323,1,2]]]);
//# sourceMappingURL=main.f3c6fdf4.chunk.js.map