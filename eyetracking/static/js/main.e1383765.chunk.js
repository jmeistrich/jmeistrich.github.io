(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,a,t){e.exports={App:"App_App__16ZpL"}},15:function(e,a,t){e.exports={tabs:"Sessions_tabs__35jZ3",sessions:"Sessions_sessions__3feZA",row:"Sessions_row__2sMsG",nowrap:"Sessions_nowrap__3CkPZ",headerRow:"Sessions_headerRow__3RFRu",rows:"Sessions_rows__sfWXu",textField:"Sessions_textField__NVfgp",menuItem:"Sessions_menuItem__1OYUk",select:"Sessions_select__2HFrf",selectWrapper:"Sessions_selectWrapper__2xJ8J",inputLabel:"Sessions_inputLabel__3wuMK",rank:"Sessions_rank__kziSl",date:"Sessions_date__2Sl4i"}},205:function(e,a,t){e.exports=t(354)},210:function(e,a,t){},25:function(e,a,t){e.exports={container:"Login_container__1jMvr",logo:"Login_logo__1T8vN",loginBox:"Login_loginBox__Wtdcb",textWrap:"Login_textWrap__g1fM5",buttonWrap:"Login_buttonWrap__2m6LQ"}},28:function(e,a,t){e.exports={appBar:"Main_appBar__3uxo1",container:"Main_container__2SX0O",grow:"Main_grow__1mOmv",menuButton:"Main_menuButton__3JDdQ",person:"Main_person__EiltI",main:"Main_main__27fT7"}},354:function(e,a,t){"use strict";t.r(a);var n,s=t(0),r=t.n(s),c=t(20),l=t.n(c),o=(t(210),t(17)),i=t(21),m=t(124),u=t.n(m),f=(t(211),t(22)),d=t.n(f),p=t(27),_=t(46),h=t.n(_),g=t(24),b=t.n(g),E=t(33),N=t.n(E),v=t(40),k=t.n(v),S=t(25),j=t.n(S),O={},w=function(){var e=Object(p.a)(d.a.mark(function e(a,t,n){var s,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!O[a]){e.next=2;break}return e.abrupt("return",O[a]);case 2:!1,e.next=7;break;case 7:return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]="application/json",t&&(n.headers.Authorization="Bearer "+t),e.next=13,fetch("https://eyenetservice20190228013441.azurewebsites.net/v1/".concat(a),n);case 13:if(!(s=e.sent).ok){e.next=21;break}return e.next=17,s.json();case 17:return r=e.sent,O[a]=r,e.abrupt("return",r);case 21:case"end":return e.stop()}},e)}));return function(a,t,n){return e.apply(this,arguments)}}(),x=function(e){var a=e.onLogin,t=Object(s.useState)(""),n=Object(o.a)(t,2),c=n[0],l=n[1],i=Object(s.useState)(""),m=Object(o.a)(i,2),u=m[0],f=m[1],_=Object(s.useCallback)(Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("authenticate",void 0,{method:"POST",body:JSON.stringify({Username:c,Password:u})});case 2:t=e.sent,a(t);case 5:case"end":return e.stop()}},e)})),[a,c,u]),g=Object(s.useCallback)(function(e){"Enter"===e.key&&_()},[_]);return r.a.createElement(h.a,{className:j.a.container,container:!0,spacing:16,justify:"center",alignItems:"center",direction:"row"},r.a.createElement(h.a,{item:!0},r.a.createElement("h1",{className:j.a.logo},"EyeTracking"),r.a.createElement(b.a,{className:j.a.loginBox},r.a.createElement("div",{className:j.a.textWrap},r.a.createElement(N.a,{className:j.a.textField,label:"Username",onChange:function(e){return l(e.target.value)},onKeyPress:g})),r.a.createElement("div",{className:j.a.textWrap},r.a.createElement(N.a,{className:j.a.textField,label:"Password",onChange:function(e){return f(e.target.value)},onKeyPress:g})),r.a.createElement("div",{className:j.a.buttonWrap},r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:_},"Login")))))},C=t(126),y=t(32),D=t.n(y),I=t(127),T=t.n(I),L=t(128),F=t.n(L),P=t(60),M=t.n(P),W=t(57),R=t.n(W),A=t(15),B=t.n(A),U=t(58),z=t.n(U),J=t(45),V=t.n(J),Q=t(44),Z=t.n(Q),H=t(47),q=t.n(H),K=t(18);!function(e){e.Name="Name",e.Rank="Rank",e.Platform="Platform",e.Date="Date",e.Test="Test"}(n||(n={}));var X=function(e,a){return a===n.Name&&e.lastName||a===n.Rank&&e.rankName||a===n.Platform&&e.platformName||a===n.Test&&e.testName||a===n.Date&&e.date||""},Y=function(e,a){var t={};return e.forEach(function(e){var n=X(e,a);t[n]||(t[n]=[]),t[n].push(e)}),Object.keys(t).sort().map(function(e){return t[e]})},G=function(e,a){return r.a.createElement(R.a,{key:e,label:e,value:e,className:B.a.tab})},$=function(e){var a=e.id,t=e.name;return r.a.createElement(z.a,{key:a,value:a,className:B.a.menuItem},t)},ee=function(e,a,t,n){var s=[{id:-1,name:"All"}].concat(Object.keys(n).map(function(e){return{id:+e,name:n[+e]}}).sort(function(e,a){return e.name.localeCompare(a.name)}));return r.a.createElement("div",{className:B.a.selectWrapper},r.a.createElement(Z.a,{className:B.a.inputLabel,htmlFor:e},e),r.a.createElement(V.a,{className:B.a.select,value:a,onChange:function(e){t(+e.target.value)},inputProps:{id:e,name:e}},s.map($)))},ae=function e(a,t,s,c,l,o,i,m,u){return a.map(function(a){var f,d=a[0],p=l+X(d,c),_=t[p];if(_)if(c===n.Name)f=a.map(function(e){return r.a.createElement("div",{key:e.resultId,className:B.a.row,style:{paddingLeft:o+40}},r.a.createElement(q.a,{color:"primary",checked:!!s[e.resultId],onChange:function(a){return m(e.resultId,a.target.checked)}}),r.a.createElement(K.a,{className:B.a.nowrap,onClick:function(){return u([e])}},r.a.createElement("div",{className:B.a.platform},e.testName),r.a.createElement("div",{className:B.a.date},e.platformName),r.a.createElement("div",{className:B.a.date},e.dateString)))});else{var h=Y(a,n.Name);f=e(h,t,s,n.Name,p,40,i,m,u)}return r.a.createElement(r.a.Fragment,{key:d.resultId},function(e,a,t,s,c){var l;return a===n.Name?l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:B.a.name,onClick:s},"".concat(e.lastName,", ").concat(e.firstName)),r.a.createElement("div",{className:B.a.rank},e.rankName)):a===n.Rank?l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:B.a.name,onClick:s},e.rankName)):a===n.Platform?l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:B.a.name,onClick:s},e.platformName)):a===n.Test?l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:B.a.name,onClick:s},e.testName)):a===n.Date&&(l=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:B.a.name,onClick:s},e.dateString))),r.a.createElement("div",{key:"h"+e.resultId,className:B.a.row,style:{paddingLeft:c}},r.a.createElement(D.a,{className:B.a.menuButton,color:"inherit","aria-label":"Menu",onClick:s},t?r.a.createElement(T.a,null):r.a.createElement(F.a,null)),l)}(d,c,_,function(){return i(p)},o),f)})},te=function(e){var a=e.data,t=e.sessionInfo,c=e.onSelectSessions,l=Object(s.useState)(""),i=Object(o.a)(l,2),m=i[0],u=i[1],f=Object(s.useState)(n.Name),d=Object(o.a)(f,2),p=d[0],_=d[1],h=Object(s.useState)(-1),g=Object(o.a)(h,2),E=g[0],v=g[1],k=Object(s.useState)(-1),S=Object(o.a)(k,2),j=S[0],O=S[1],w=Object(s.useState)(-1),x=Object(o.a)(w,2),y=x[0],D=x[1],I=Object(s.useState)(-1),T=Object(o.a)(I,2),L=T[0],F=T[1],P=Object(s.useState)({}),W=Object(o.a)(P,2),R=W[0],A=W[1],U=Object(s.useState)({}),z=Object(o.a)(U,2),J=z[0],V=z[1],Q=a.filter(function(e){return(y<0||e.platformId===y)&&(j<0||e.testId===j)&&(L<0||e.date===L)&&(!m||function(e,a,t){switch(t){case n.Name:return e.lastName.toLowerCase().includes(a)||e.firstName.toLowerCase().includes(a);case n.Rank:return e.rankName.includes(a);case n.Platform:return e.platformName.includes(a);case n.Test:return e.testName.includes(a);default:return!0}}(e,m,p))}),Z={};Q.forEach(function(e){Z[e.resultId]=e});var H=Y(Q,p),X=Object(s.useCallback)(function(e,a){A({}),_(a)},[]),$=Object(s.useCallback)(function(e){u(e.target.value.toLowerCase())},[]),te=Object(s.useCallback)(function(e){var a=Object.assign({},R);a[e]=!a[e],A(a)},[R]),ne=Object(s.useCallback)(function(e,a){var t=Object.assign({},J,Object(C.a)({},e,a));V(t)},[J]),se=Object(s.useCallback)(function(){var e={};0===Object.keys(J).length&&H.forEach(function(a){return a.forEach(function(a){e[a.resultId]=!0})}),V(e)},[J,H]),re=Object(s.useCallback)(function(){var e=Object.keys(J).map(function(e){return Z[+e]});if(e.length>5&&!window.confirm("Are you sure you want to compare ".concat(e.length," sessions?")))return;c(e)},[J,c,Z]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{className:B.a.tabs,value:p,onChange:X},G(n.Name),G(n.Rank),G(n.Platform),G(n.Test),G(n.Date)),r.a.createElement(b.a,{elevation:1},!a&&r.a.createElement("span",null,"Loading..."),a&&r.a.createElement("div",null,r.a.createElement("div",{className:"".concat(B.a.row," ").concat(B.a.headerRow)},r.a.createElement(q.a,{key:"checkbox",color:"primary",checked:Object.keys(J).length>0,onChange:se}),Object.keys(J).length?r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{variant:"contained",color:"primary",onClick:re},"Compare")):r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{label:p,variant:"outlined",margin:"dense",onChange:$,InputProps:{classes:{input:"textField"}}}),ee("Rank",E,v,t.ranks),ee("Platform",y,D,t.platforms),ee("Test",j,O,t.tests),ee("Date",L,F,t.dates))),r.a.createElement("div",{className:B.a.rows},ae(H,R,J,p,"",0,te,ne,e.onSelectSessions)))))},ne=function(e){var a=Object(s.useState)(void 0),t=Object(o.a)(a,2),n=t[0],c=t[1];return Object(s.useEffect)(function(){var a=function(e){var a={platforms:{},ranks:{},dates:{},tests:{},subjects:{}};e.forEach(function(e){var t=new Date(e.timeCollected);e.date=+t,e.dateString=t.toDateString(),e.name="".concat(e.lastName,", ").concat(e.firstName),a.platforms[e.platformId]=e.platformName,a.dates[e.date]=e.dateString,a.subjects[e.subjectId]=e.name,a.ranks[e.rankId]=e.rankName,a.tests[e.testId]=e.testName}),c({data:e,sessionInfo:a})};w("result/summary",e.user.token).then(function(){var e=Object(p.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(t);case 2:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}())},[e.user.token]),r.a.createElement("div",{className:B.a.sessions},n&&r.a.createElement(te,Object.assign({},e,{data:n.data,sessionInfo:n.sessionInfo})),!n&&r.a.createElement("span",null,"Loading..."))},se=t(9),re=t.n(se),ce=t(90),le=t.n(ce),oe=t(131),ie=t.n(oe),me=t(129),ue=t.n(me),fe=t(130),de=t.n(fe),pe=["Raw","Sum"],_e=function(e,a){return{chart:{zoomType:"x"},title:{text:""},xAxis:{title:{text:"Time"}},yAxis:{title:{text:"Workload"}},series:e.map(function(e){return{type:"line",name:e.name,data:e.data}})}},he=function(e){var a=e.sessions,t=e.user.token,n=Object(s.useState)(void 0),c=Object(o.a)(n,2),l=c[0],i=c[1],m=Object(s.useState)("Sum"),u=Object(o.a)(m,2),f=u[0],_=u[1],h=Object(s.useState)(_e([])),g=Object(o.a)(h,2),b=g[0],E=g[1];return Object(s.useEffect)(function(){if(l){var e,a=[];e="Sum"===f?function(e){var a=[];return e.reduce(function(e,t,n){return a[n]=+(e+t).toFixed(2)},0),a}:function(e){return e},l.forEach(function(t,n){var s=t.session,r=t.resultData.map(function(e){return(Math.max(0,e.leftValue)+Math.max(e.rightValue,0))/2}),c=e(r);a.push({name:s.testName,data:c})}),E(_e(a))}},[l,f]),Object(s.useEffect)(function(){Promise.all(a.map(function(){var e=Object(p.a)(d.a.mark(function e(a){var n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return{session:a,resultData:e}},e.next=3,w("result/workloaddata/".concat(a.resultId),t);case 3:return s=e.sent,e.abrupt("return",n(s));case 5:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}())).then(function(e){i(e)})},[t,a]),l?r.a.createElement("div",{className:re.a.sessionDetails},r.a.createElement("div",{className:"".concat(re.a.card," ").concat(re.a.personDetails)},a.map(function(e){return r.a.createElement("span",{key:e.resultId},r.a.createElement("div",{className:re.a.name},e.name),r.a.createElement("div",{className:re.a.light},e.rankName),r.a.createElement("div",{className:re.a.light},e.platformName),r.a.createElement("div",{className:re.a.light},e.dateString))})),r.a.createElement(K.b,{className:"".concat(re.a.card," ").concat(re.a.chartCard)},r.a.createElement(K.c,{className:re.a.cardContent},r.a.createElement(K.f,{className:re.a.title,color:"textSecondary"},"Results"),r.a.createElement(K.e,{className:re.a.selectAlgorithm,value:f,onChange:function(e){return _(e.target.value)}},pe.map(function(e){return r.a.createElement(K.d,{key:e,value:e,className:re.a.menuItem},e)})),r.a.createElement(de.a,{className:re.a.chart,highcharts:ue.a,options:b}))),r.a.createElement(K.b,{className:"".concat(re.a.card," ").concat(re.a.highlights)},r.a.createElement(K.c,{className:re.a.cardContent},r.a.createElement(K.f,{className:re.a.title,color:"textSecondary"},"Highlights"),r.a.createElement(K.f,{className:re.a.highlightsContent},r.a.createElement("span",{className:re.a.highlightsText},"Workload"),r.a.createElement(le.a,{fontSize:"small",className:"".concat(re.a.icon," ").concat(re.a.arrowUp)})," 3%"),r.a.createElement(K.f,{className:re.a.highlightsContent},r.a.createElement("span",{className:re.a.highlightsText},"Time"),r.a.createElement(ie.a,{fontSize:"small",className:"".concat(re.a.icon," ").concat(re.a.arrowDown)})," 2%"),r.a.createElement(K.f,{className:re.a.highlightsContent},r.a.createElement("span",{className:re.a.highlightsText},"Scan Efficiency"),r.a.createElement(le.a,{fontSize:"small",className:"".concat(re.a.icon," ").concat(re.a.arrowUp)})," 5%")))):r.a.createElement("div",{className:re.a.loading},r.a.createElement("div",null,"Loading..."))},ge=t(61),be=t.n(ge),Ee=t(62),Ne=t.n(Ee),ve=t(59),ke=t.n(ve),Se=t(132),je=t.n(Se),Oe=t(133),we=t.n(Oe),xe=t(28),Ce=t.n(xe),ye=function(e){var a=Object(s.useState)(void 0),t=Object(o.a)(a,2),n=t[0],c=t[1],l=Object(s.useCallback)(function(){return c(void 0)},[]),i=Object(s.useCallback)(function(e){c(e)},[c]);return r.a.createElement("div",{className:Ce.a.container},r.a.createElement(be.a,{position:"static",className:Ce.a.appBar},r.a.createElement(Ne.a,null,n&&r.a.createElement(D.a,{className:Ce.a.menuButton,color:"inherit","aria-label":"Menu"},r.a.createElement(je.a,{onClick:l})),r.a.createElement(ke.a,{variant:"h6",color:"inherit"},n?"Session Details":"Sessions"),r.a.createElement("div",{className:Ce.a.grow}),r.a.createElement(k.a,{className:Ce.a.menuButton,color:"inherit","aria-label":"Menu"},r.a.createElement(we.a,{className:Ce.a.person}),"User"))),r.a.createElement("div",{className:Ce.a.main},n&&r.a.createElement(he,{user:e.user,sessions:n}),!n&&r.a.createElement(ne,{user:e.user,onSelectSessions:i})))},De=Object(i.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{light:"#69b6ff",main:"#1c87e5",dark:"#005bb2",contrastText:"#fff"},secondary:{light:"#ff94c2",main:"#f06292",dark:"#ba2d65",contrastText:"#fff"}}}),Ie=function(){var e=Object(s.useState)(void 0),a=Object(o.a)(e,2),t=a[0],n=a[1],c=Object(s.useCallback)(function(e){n(e)},[]);return r.a.createElement(i.MuiThemeProvider,{theme:De},r.a.createElement("div",{className:u.a.App},!t&&r.a.createElement(x,{onLogin:c}),t&&r.a.createElement(ye,{user:t})))};l.a.render(r.a.createElement(Ie,null),document.getElementById("root"))},9:function(e,a,t){e.exports={sessionDetails:"SessionDetails_sessionDetails__1aDZz",card:"SessionDetails_card___w74g",personDetails:"SessionDetails_personDetails__343Q8",name:"SessionDetails_name__3v4kk",light:"SessionDetails_light__f4q78",cardContent:"SessionDetails_cardContent__1YwjV",highlights:"SessionDetails_highlights__kFIPi",title:"SessionDetails_title__9QFpI",icon:"SessionDetails_icon__1nVQx",arrowUp:"SessionDetails_arrowUp__3PXUd",arrowDown:"SessionDetails_arrowDown__2qd3D",highlightsText:"SessionDetails_highlightsText__2O5lt",highlightsContent:"SessionDetails_highlightsContent__3yRH8",loading:"SessionDetails_loading__d_Wk_",selectAlgorithm:"SessionDetails_selectAlgorithm__2nCeW",menuItem:"SessionDetails_menuItem__3H90q"}}},[[205,1,2]]]);
//# sourceMappingURL=main.e1383765.chunk.js.map